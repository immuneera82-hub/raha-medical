{% extends "knowledge_base/base.html" %}

{% block content %}
<div class="bg-gray-50 min-h-screen pb-20">

    <!-- Hero Section -->
    <div class="relative bg-gradient-to-r from-teal-900 to-teal-700 text-white py-16 overflow-hidden">
        <div class="absolute inset-0 opacity-10">
            <div
                class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0zNiAxOGMzLjMxNCAwIDYgMi42ODYgNiA2cy0yLjY4NiA2LTYgNi02LTIuNjg2LTYtNiAyLjY4Ni02IDYtNnoiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLXdpZHRoPSIyIi8+PC9nPjwvc3ZnPg==')]">
            </div>
        </div>

        <div class="container mx-auto px-4 relative z-10">
            <div class="flex flex-col md:flex-row items-center gap-8">
                <div
                    class="w-32 h-32 bg-white rounded-2xl p-4 shadow-2xl flex items-center justify-center flex-shrink-0">
                    <img src="{{ hospital.image_url }}" alt="{{ hospital.name_ar }}"
                        class="w-full h-full object-contain">
                </div>
                <div class="text-center md:text-right flex-1">
                    <h1 class="text-4xl md:text-5xl font-bold mb-4">{{ hospital.name_ar }}</h1>
                    <p class="text-xl mb-4 text-teal-100">{{ hospital.name_en }}</p>
                    <div class="flex flex-wrap items-center gap-4 text-teal-100 justify-center md:justify-start">
                        <span class="flex items-center gap-2">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z">
                                </path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            </svg>
                            {{ hospital.city }}, Ø§Ù„Ù‡Ù†Ø¯
                        </span>
                        {% if hospital.jci_accredited %}
                        <span
                            class="bg-yellow-400 text-yellow-900 px-4 py-2 rounded-full text-sm font-bold flex items-center gap-2 shadow-lg">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                                    clip-rule="evenodd"></path>
                            </svg>
                            JCI Ù…Ø¹ØªÙ…Ø¯ Ø¯ÙˆÙ„ÙŠØ§Ù‹
                        </span>
                        {% endif %}
                    </div>
                </div>
                <div class="flex flex-col gap-3">
                    <button onclick="showConsultationModal()"
                        class="bg-white text-teal-700 px-6 py-3 rounded-xl font-bold hover:bg-gray-100 transition shadow-lg text-center cursor-pointer">
                        ğŸ“ Ø§Ø³ØªØ´Ø§Ø±Ø© Ù…Ø¬Ø§Ù†ÙŠØ©
                    </button>
                    <button onclick="openWhatsApp()"
                        class="border-2 border-white text-white px-6 py-3 rounded-xl font-bold hover:bg-teal-600 transition text-center cursor-pointer">
                        ğŸ’¬ ÙˆØ§ØªØ³Ø§Ø¨
                    </button>
                </div>
            </div>
        </div>
    </div>


    <!-- Quick Facts Bar -->
    {% if hospital.success_rates and hospital.success_rates.quick_facts %}
    <div class="bg-white shadow-md">
        <div class="container mx-auto px-4 py-6">
            <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-6">
                {% if hospital.success_rates.quick_facts.established_year %}
                <div class="text-center">
                    <div class="text-3xl font-bold text-teal-600">{{ hospital.success_rates.quick_facts.established_year
                        }}</div>
                    <div class="text-sm text-gray-600 mt-1">Ø³Ù†Ø© Ø§Ù„ØªØ£Ø³ÙŠØ³</div>
                </div>
                {% endif %}
                {% if hospital.success_rates.quick_facts.total_beds %}
                <div class="text-center">
                    <div class="text-3xl font-bold text-teal-600">{{ hospital.success_rates.quick_facts.total_beds }}
                    </div>
                    <div class="text-sm text-gray-600 mt-1">Ø³Ø±ÙŠØ±</div>
                </div>
                {% endif %}
                {% if hospital.success_rates.quick_facts.specialties_count %}
                <div class="text-center">
                    <div class="text-3xl font-bold text-teal-600">{{
                        hospital.success_rates.quick_facts.specialties_count }}</div>
                    <div class="text-sm text-gray-600 mt-1">ØªØ®ØµØµ Ø·Ø¨ÙŠ</div>
                </div>
                {% endif %}
                {% if hospital.success_rates.quick_facts.arab_patients_yearly %}
                <div class="text-center">
                    <div class="text-3xl font-bold text-teal-600">{{
                        hospital.success_rates.quick_facts.arab_patients_yearly }}</div>
                    <div class="text-sm text-gray-600 mt-1">Ù…Ø±ÙŠØ¶ Ø¹Ø±Ø¨ÙŠ/Ø³Ù†Ø©</div>
                </div>
                {% endif %}
                {% if hospital.success_rates.quick_facts.success_rate_cardiology %}
                <div class="text-center">
                    <div class="text-3xl font-bold text-teal-600">{{
                        hospital.success_rates.quick_facts.success_rate_cardiology }}</div>
                    <div class="text-sm text-gray-600 mt-1">Ù†Ø¬Ø§Ø­ Ø§Ù„Ù‚Ù„Ø¨</div>
                </div>
                {% endif %}
                {% if hospital.success_rates.quick_facts.ivf_success_rate %}
                <div class="text-center">
                    <div class="text-3xl font-bold text-teal-600">{{ hospital.success_rates.quick_facts.ivf_success_rate
                        }}</div>
                    <div class="text-sm text-gray-600 mt-1">Ù†Ø¬Ø§Ø­ IVF</div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
    {% endif %}


    <div class="container mx-auto px-4 py-12">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Main Content -->
            <div class="lg:col-span-2 space-y-12">

                <!-- About Hospital (Main Overview) -->
                <section class="bg-white rounded-2xl p-8 shadow-sm">
                    <h2 class="text-3xl font-bold text-gray-900 mb-6 flex items-center gap-3">
                        <span class="w-1.5 h-10 bg-teal-500 rounded-full"></span>
                        Ù†Ø¨Ø°Ø© Ø¹Ù† Ø§Ù„Ù…Ø³ØªØ´ÙÙ‰
                    </h2>
                    <div class="prose prose-lg max-w-none text-gray-600 leading-relaxed">
                        {{ hospital.overview_ar|safe }}
                    </div>
                </section>

                <!-- Certifications & Accreditations -->
                {% if hospital.success_rates and hospital.success_rates.certifications %}
                <section class="bg-white rounded-2xl p-8 shadow-sm">
                    <h2 class="text-3xl font-bold text-gray-900 mb-6 flex items-center gap-3">
                        <span class="w-1.5 h-10 bg-teal-500 rounded-full"></span>
                        Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯Ø§Øª ÙˆØ§Ù„Ø´Ù‡Ø§Ø¯Ø§Øª Ø§Ù„Ø¯ÙˆÙ„ÙŠØ©
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        {% for cert in hospital.success_rates.certifications %}
                        <div
                            class="flex gap-4 p-5 bg-gradient-to-br from-teal-50 to-white rounded-xl border-2 border-teal-100 hover:border-teal-300 transition">
                            <div
                                class="w-16 h-16 bg-teal-600 rounded-full flex items-center justify-center flex-shrink-0 text-white shadow-lg">
                                <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd"
                                        d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                                        clip-rule="evenodd"></path>
                                </svg>
                            </div>
                            <div>
                                <h3 class="font-bold text-gray-900 text-lg">{{ cert.name }}</h3>
                                <p class="text-sm text-teal-700 font-semibold">Ù…Ù†Ø° {{ cert.year }}</p>
                                <p class="text-sm text-gray-600 mt-2">{{ cert.description }}</p>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </section>
                {% endif %}

                <!-- Centers of Excellence -->
                {% if hospital.success_rates.centers_of_excellence %}
                <section class="bg-white rounded-2xl p-8 shadow-sm">
                    <h2 class="text-3xl font-bold text-gray-900 mb-6 flex items-center gap-3">
                        <span class="w-1.5 h-10 bg-teal-500 rounded-full"></span>
                        Ù…Ø±Ø§ÙƒØ² Ø§Ù„ØªÙ…ÙŠØ² Ø§Ù„Ø·Ø¨ÙŠ
                    </h2>
                    <div class="space-y-6">
                        {% for center in hospital.success_rates.centers_of_excellence %}
                        <div
                            class="border-2 border-gray-100 rounded-xl p-6 hover:border-teal-300 hover:shadow-lg transition">
                            <div class="flex items-start gap-4">
                                <div
                                    class="w-14 h-14 bg-teal-100 rounded-xl flex items-center justify-center flex-shrink-0">
                                    <span class="text-3xl">
                                        {% if center.icon == 'heart' %}â¤ï¸
                                        {% elif center.icon == 'ribbon' %}ğŸ—ï¸
                                        {% elif center.icon == 'bone' %}ğŸ¦´
                                        {% elif center.icon == 'baby' %}ğŸ‘¶
                                        {% else %}ğŸ¥{% endif %}
                                    </span>
                                </div>
                                <div class="flex-1">
                                    <h3 class="text-xl font-bold text-gray-900 mb-2">{{ center.name_ar }}</h3>
                                    <p class="text-teal-700 font-semibold mb-3">{{ center.description }}</p>
                                    <div class="flex flex-wrap gap-2">
                                        {% for treatment in center.treatments %}
                                        <span class="px-3 py-1 bg-teal-50 text-teal-700 rounded-full text-sm">{{
                                            treatment }}</span>
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </section>
                {% endif %}

                <!-- Latest Technologies & Equipment -->
                {% if hospital.success_rates.technologies %}
                <section
                    class="bg-gradient-to-br from-teal-50 to-white rounded-2xl p-8 shadow-sm border-2 border-teal-100">
                    <h2 class="text-3xl font-bold text-gray-900 mb-6 flex items-center gap-3">
                        <span class="w-1.5 h-10 bg-teal-500 rounded-full"></span>
                        Ø£Ø­Ø¯Ø« Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª ÙˆØ§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ø·Ø¨ÙŠØ©
                    </h2>
                    <div class="space-y-8">
                        {% for tech in hospital.success_rates.technologies %}
                        <div class="bg-white rounded-xl overflow-hidden shadow-md hover:shadow-xl transition">
                            {% if tech.image_url %}
                            <div class="h-64 bg-gray-100 overflow-hidden">
                                <img src="{{ tech.image_url }}" alt="{{ tech.title }}"
                                    class="w-full h-full object-cover">
                            </div>
                            {% endif %}
                            <div class="p-6">
                                <div class="flex items-start justify-between mb-4">
                                    <div>
                                        <h3 class="text-2xl font-bold text-gray-900">{{ tech.title }}</h3>
                                        <p class="text-sm text-gray-600 mt-1">Ø§Ù„ØªØµÙ†ÙŠÙ: {{ tech.category }}</p>
                                    </div>
                                    {% if tech.first_in %}
                                    <span
                                        class="bg-yellow-400 text-yellow-900 px-4 py-2 rounded-full text-xs font-bold">
                                        Ø§Ù„Ø£ÙˆÙ„ ÙÙŠ {{ tech.first_in }}
                                    </span>
                                    {% endif %}
                                </div>
                                <p class="text-gray-700 mb-4 leading-relaxed">{{ tech.description }}</p>
                                <div class="bg-teal-50 rounded-lg p-4 mb-4">
                                    <h4 class="font-bold text-teal-900 mb-3">Ø§Ù„ÙÙˆØ§Ø¦Ø¯:</h4>
                                    <ul class="space-y-2">
                                        {% for benefit in tech.benefits %}
                                        <li class="flex items-start gap-2">
                                            <svg class="w-5 h-5 text-teal-600 flex-shrink-0 mt-0.5" fill="currentColor"
                                                viewBox="0 0 20 20">
                                                <path fill-rule="evenodd"
                                                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                                                    clip-rule="evenodd"></path>
                                            </svg>
                                            <span class="text-gray-700">{{ benefit }}</span>
                                        </li>
                                        {% endfor %}
                                    </ul>
                                </div>
                                {% if tech.treatments_offered %}
                                <div class="text-center py-3 bg-teal-600 text-white rounded-lg font-bold">
                                    ÙŠÙˆÙØ± {{ tech.treatments_offered }} Ø¹Ù„Ø§Ø¬ Ù…Ø®ØªÙ„Ù
                                </div>
                                {% endif %}
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </section>
                {% endif %}

                <!-- Latest News & Achievements -->
                {% if hospital.success_rates.news %}
                <section class="bg-white rounded-2xl p-8 shadow-sm">
                    <h2 class="text-3xl font-bold text-gray-900 mb-6 flex items-center gap-3">
                        <span class="w-1.5 h-10 bg-teal-500 rounded-full"></span>
                        Ø¢Ø®Ø± Ø§Ù„Ø£Ø®Ø¨Ø§Ø± ÙˆØ§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª
                    </h2>
                    <div class="space-y-6">
                        {% for item in hospital.success_rates.news %}
                        <div
                            class="border-r-4 {% if item.importance == 'high' %}border-teal-600{% else %}border-gray-300{% endif %} bg-gray-50 p-6 rounded-lg hover:shadow-md transition">
                            <div class="flex items-start justify-between mb-3">
                                <span class="text-sm text-gray-500">ğŸ“… {{ item.date }}</span>
                                {% if item.importance == 'high' %}
                                <span class="bg-red-500 text-white px-3 py-1 rounded-full text-xs font-bold">Ø¬Ø¯ÙŠØ¯</span>
                                {% endif %}
                            </div>
                            <h3 class="text-xl font-bold text-gray-900 mb-2">{{ item.headline }}</h3>
                            <p class="text-gray-700 leading-relaxed">{{ item.snippet }}</p>
                        </div>
                        {% endfor %}
                    </div>
                </section>
                {% endif %}

                <!-- Gallery -->
                {% if hospital.success_rates and hospital.success_rates.gallery %}
                <section class="bg-white rounded-2xl p-8 shadow-sm">
                    <h2 class="text-3xl font-bold text-gray-900 mb-6 flex items-center gap-3">
                        <span class="w-1.5 h-10 bg-teal-500 rounded-full"></span>
                        Ù…Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±
                    </h2>
                    <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                        {% for img in hospital.success_rates.gallery %}
                        <a href="{{ img }}"
                            class="glightbox rounded-xl overflow-hidden shadow-md h-48 group cursor-pointer block"
                            data-gallery="hospital-gallery" data-title="{{ hospital.name_ar }} - ØµÙˆØ±Ø© {{ loop.index }}"
                            data-description="Ù…Ø¹Ø±Ø¶ ØµÙˆØ± {{ hospital.name_ar }}">
                            <img src="{{ img }}"
                                class="w-full h-full object-cover transform group-hover:scale-110 transition duration-500"
                                alt="{{ hospital.name_ar }} - {{ loop.index }}" loading="lazy" width="400" height="300">
                        </a>
                        {% endfor %}
                    </div>
                </section>
                {% endif %}

                <!-- Featured Doctors -->
                {% if doctors %}
                <section class="bg-white rounded-2xl p-8 shadow-sm">
                    <h2 class="text-3xl font-bold text-gray-900 mb-6 flex items-center gap-3">
                        <span class="w-1.5 h-10 bg-teal-500 rounded-full"></span>
                        Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡ Ø§Ù„Ù…ØªÙ…ÙŠØ²ÙˆÙ†
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        {% for doctor in doctors %}
                        <div
                            class="bg-gradient-to-br from-gray-50 to-white p-6 rounded-xl shadow-sm hover:shadow-lg transition flex items-center gap-4 border border-gray-200">
                            <img src="{{ doctor.image_url }}" alt="{{ doctor.name_ar }}"
                                class="w-20 h-20 rounded-full object-cover border-4 border-teal-100">
                            <div>
                                <h3 class="font-bold text-gray-900 text-lg">{{ doctor.name_ar }}</h3>
                                <p class="text-sm text-teal-600 font-semibold">{{ doctor.specialty }}</p>
                                <p class="text-sm text-gray-600">{{ doctor.experience_years }} Ø³Ù†ÙˆØ§Øª Ø®Ø¨Ø±Ø©</p>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </section>
                {% endif %}

            </div>

            <!-- Sidebar -->
            <div class="space-y-6">

                <!-- Arab Services Card -->
                {% if hospital.success_rates.arab_services %}
                <div class="bg-gradient-to-br from-teal-600 to-teal-700 text-white rounded-2xl p-6 shadow-lg">
                    <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
                        <span class="text-2xl">ğŸŒ™</span>
                        Ø®Ø¯Ù…Ø§Øª Ø®Ø§ØµØ© Ù„Ù„Ù…Ø±Ø¶Ù‰ Ø§Ù„Ø¹Ø±Ø¨
                    </h3>
                    <ul class="space-y-3">
                        {% if hospital.success_rates.arab_services.interpreters %}
                        <li class="flex items-center gap-2">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                                    clip-rule="evenodd"></path>
                            </svg>
                            Ù…ØªØ±Ø¬Ù…ÙˆÙ† Ø¹Ø±Ø¨ 24/7
                        </li>
                        {% endif %}
                        {% if hospital.success_rates.arab_services.halal_food %}
                        <li class="flex items-center gap-2">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                                    clip-rule="evenodd"></path>
                            </svg>
                            Ø·Ø¹Ø§Ù… Ø­Ù„Ø§Ù„ Ù…Ø¶Ù…ÙˆÙ†
                        </li>
                        {% endif %}
                        {% if hospital.success_rates.arab_services.prayer_rooms %}
                        <li class="flex items-center gap-2">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                                    clip-rule="evenodd"></path>
                            </svg>
                            ØºØ±Ù ØµÙ„Ø§Ø© Ù…Ø¬Ù‡Ø²Ø©
                        </li>
                        {% endif %}
                        {% if hospital.success_rates.arab_services.airport_pickup %}
                        <li class="flex items-center gap-2">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                                    clip-rule="evenodd"></path>
                            </svg>
                            Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ù…Ù† Ø§Ù„Ù…Ø·Ø§Ø±
                        </li>
                        {% endif %}
                        {% if hospital.success_rates.arab_services.visa_assistance %}
                        <li class="flex items-center gap-2">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                                    clip-rule="evenodd"></path>
                            </svg>
                            Ù…Ø³Ø§Ø¹Ø¯Ø© ÙÙŠ Ø§Ù„ØªØ£Ø´ÙŠØ±Ø©
                        </li>
                        {% endif %}
                    </ul>
                </div>
                {% endif %}

                <!-- Location Map -->
                <div class="bg-white rounded-2xl p-6 shadow-sm">
                    <h3 class="font-bold text-gray-900 mb-4 text-lg">ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙˆØ§Ù„Ø¹Ù†ÙˆØ§Ù†</h3>

                    {% if hospital.google_maps_url %}
                    <!-- Google Maps Embed -->
                    <div class="rounded-xl overflow-hidden mb-4 shadow-md">
                        <iframe src="{{ hospital.google_maps_url }}" class="w-full h-64" style="border:0;"
                            allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
                        </iframe>
                    </div>
                    {% else %}
                    <!-- Fallback placeholder -->
                    <div class="bg-gray-200 h-48 rounded-xl flex items-center justify-center text-gray-500 mb-4">
                        <span class="flex items-center gap-2">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z">
                                </path>
                            </svg>
                            Ø®Ø±ÙŠØ·Ø© Ø¬ÙˆØ¬Ù„
                        </span>
                    </div>
                    {% endif %}

                    <p class="text-sm text-gray-700 leading-relaxed mb-3">{{ hospital.location }}</p>

                    {% if hospital.website_url %}
                    <a href="{{ hospital.website_url }}" target="_blank" rel="noopener noreferrer"
                        class="block mt-4 text-center bg-teal-50 text-teal-700 py-2 rounded-lg hover:bg-teal-100 transition font-semibold">
                        ğŸŒ Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø±Ø³Ù…ÙŠ
                    </a>
                    {% endif %}
                </div>

                <!-- Patient Testimonials -->
                {% if hospital.success_rates.testimonials %}
                <div class="bg-teal-50 rounded-2xl p-6 border-2 border-teal-100">
                    <h3 class="font-bold text-teal-900 mb-4 text-lg flex items-center gap-2">
                        <span class="text-2xl">ğŸ’¬</span>
                        Ø¢Ø±Ø§Ø¡ Ø§Ù„Ù…Ø±Ø¶Ù‰ Ø§Ù„Ø¹Ø±Ø¨
                    </h3>
                    <div class="space-y-4">
                        {% for review in hospital.success_rates.testimonials[:3] %}
                        <div class="bg-white p-4 rounded-xl shadow-sm">
                            <div class="flex text-yellow-400 mb-2 text-sm">
                                {% for i in range(review.rating) %}â˜…{% endfor %}
                            </div>
                            <p class="text-gray-700 text-sm italic leading-relaxed">"{{ review.text }}"</p>
                            <div class="mt-3 pt-3 border-t border-gray-200">
                                <p class="text-xs font-bold text-teal-700">{{ review.patient_name }}</p>
                                <p class="text-xs text-gray-500">{{ review.country }} | {{ review.treatment }}</p>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}

                <!-- CTA Card -->
                <div class="bg-gradient-to-br from-teal-700 to-teal-900 text-white rounded-2xl p-6 shadow-xl"
                    id="consultation">
                    <h3 class="text-xl font-bold mb-3">ğŸ“ Ø§Ø­Ø¬Ø² Ø§Ø³ØªØ´Ø§Ø±ØªÙƒ Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©</h3>
                    <p class="text-teal-100 text-sm mb-4">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ø³ØªØ´Ø§Ø±Ø© Ø·Ø¨ÙŠØ© Ù…Ø¬Ø§Ù†ÙŠØ© Ù…Ø¹ Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ø·Ø¨Ø§Ø¡</p>
                    <button onclick="showConsultationModal()"
                        class="w-full bg-white text-teal-700 px-6 py-3 rounded-lg font-bold hover:bg-gray-100 transition shadow-lg mb-3">
                        Ø§Ø³ØªØ´Ø§Ø±Ø© Ù…Ø¬Ø§Ù†ÙŠØ©
                    </button>
                    <button onclick="openWhatsApp()"
                        class="w-full border-2 border-white text-white px-6 py-3 rounded-lg font-bold hover:bg-teal-600 transition">
                        ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨
                    </button>
                </div>

            </div>
        </div>
    </div>
</div>

<!-- Schema.org Markup for SEO & AI -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Hospital",
  "name": "{{ hospital.name_en }}",
  "alternateName": "{{ hospital.name_ar }}",
  "image": "{{ hospital.image_url }}",
  "address": {
    "@type": "PostalAddress",
    "addressLocality": "{{ hospital.city }}",
    "addressCountry": "IN",
    "streetAddress": "{{ hospital.location }}"
  },
  "telephone": "{{ hospital.success_rates.contact.phone_india if hospital.success_rates and hospital.success_rates.contact else '' }}",
  "url": "{{ hospital.website_url }}",
  {% if hospital.jci_accredited %}
  "accreditation": {
    "@type": "Accreditation",
    "name": "Joint Commission International (JCI)"
  },
  {% endif %}
  "availableLanguage": ["ar", "en", "hi"],
  "medicalSpecialty": [
    {% if hospital.success_rates and hospital.success_rates.centers_of_excellence %}
    {% for center in hospital.success_rates.centers_of_excellence %}
    "{{ center.name_en }}"{% if not loop.last %},{% endif %}
    {% endfor %}
    {% endif %}
  ]
}
</script>

<!-- GLightbox CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.2.0/dist/css/glightbox.min.css">

<!-- GLightbox JS -->
<script src="https://cdn.jsdelivr.net/npm/glightbox@3.2.0/dist/js/glightbox.min.js"></script>

<script>
    // Initialize GLightbox for image gallery
    const lightbox = GLightbox({
        selector: '.glightbox',
        touchNavigation: true,
        loop: true,
        autoplayVideos: true
    });

    // WhatsApp button functionality
    function openWhatsApp() {
        const hospitalName = "{{ hospital.name_ar }}";
        const message = encodeURIComponent(`Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø£Ø±ØºØ¨ ÙÙŠ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ù† ${hospitalName}`);
        {% if hospital.success_rates and hospital.success_rates.contact and hospital.success_rates.contact.whatsapp %}
        const whatsappNumber = "{{ hospital.success_rates.contact.whatsapp }}";
        {% else %}
        const whatsappNumber = "966500000000"; // Default number
        {% endif %}
        window.open(`https://wa.me/${whatsappNumber}?text=${message}`, '_blank');
    }

    // Consultation modal functionality
    function showConsultationModal() {
        // Open WhatsApp with consultation message
        const hospitalName = "{{ hospital.name_ar }}";
        const message = encodeURIComponent(`Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø£Ø±ØºØ¨ ÙÙŠ Ø­Ø¬Ø² Ø§Ø³ØªØ´Ø§Ø±Ø© Ø·Ø¨ÙŠØ© Ù…Ø¬Ø§Ù†ÙŠØ© ÙÙŠ ${hospitalName}`);
        {% if hospital.success_rates and hospital.success_rates.contact and hospital.success_rates.contact.whatsapp %}
        const whatsappNumber = "{{ hospital.success_rates.contact.whatsapp }}";
        {% else %}
        const whatsappNumber = "966500000000";
        {% endif %}
        window.open(`https://wa.me/${whatsappNumber}?text=${message}`, '_blank');
    }
</script>

<style>
    /* Enhanced image gallery styles */
    .glightbox {
        cursor: zoom-in;
    }

    .glightbox:hover {
        opacity: 0.9;
    }

    /* Custom GLightbox theme matching site colors */
    .goverlay {
        background: rgba(0, 0, 0, 0.95) !important;
    }

    .gcontainer .gslide-description {
        background: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.75));
    }
</style>

{% endblock %}